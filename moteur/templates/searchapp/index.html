<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Moteur de recherche Gutenberg</title>
    <style>
        body { font-family: Arial, sans-serif; background: #fefefe; padding: 20px; line-height: 1.6; }
        h1 { color: #2c3e50; }
        h2 { margin-top: 30px; color: #34495e; }
        .block { margin-bottom: 25px; padding: 15px; background: #fff; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        input[type="text"] { width: 250px; padding: 8px; border: 1px solid #bbb; border-radius: 5px; }
        button { padding: 8px 15px; border: none; border-radius: 5px; background: #3498db; color: white; cursor: pointer; }
        button:hover { background: #217dbb; }
        ul { list-style: none; padding: 0; }
        li { background: #f1f1f1; margin: 5px 0; padding: 8px 10px; border-radius: 5px; }
        .occ { color: #666; font-size: 0.9em; margin-left: 5px; }
    </style>
</head>
<body>

<h1>Moteur de recherche Gutenberg</h1>

<!-- Recherche par index inversé -->
<div class="block">
    <h2>Recherche par mot-clé</h2>
    <form method="post">
        {% csrf_token %}
        <input type="text" name="mot" placeholder="Mot indexé" value="{{ keyword_index }}">
        <button type="submit">Rechercher</button>
    </form>
</div>

<!-- Recherche regex -->
<div class="block">
    <h2>Recherche avec Regex</h2>
    <form method="post">
        {% csrf_token %}
        <input type="text" name="regex" placeholder="Expression régulière" value="{{ regex_query }}">
        <button type="submit">Rechercher</button>
    </form>
</div>

<!-- Résultats recherche par mot-clé -->
{% if results_index %}
    <h2>Résultats recherche mot-clé :</h2>
    <ul>
        {% for book in results_index %}
            <li>{{ book.title }} — <span class="occ">{{ book.count }} occurrences</span></li>
        {% endfor %}
    </ul>
{% endif %}

<!-- Résultats recherche regex -->
{% if results_regex %}
    <h2>Résultats recherche Regex :</h2>
    <ul>
        {% for book in results_regex %}
            <li>{{ book.title }} — <span class="occ">{{ book.count }} occurrences</span></li>
        {% endfor %}
    </ul>
{% endif %}

</body>
</html>
