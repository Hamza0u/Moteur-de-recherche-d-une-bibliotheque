<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Moteur de recherche Gutenberg</title>

    <style>
        /* --- Thème Gothique Roman Classique --- */

        body {
            font-family: "Georgia", "Garamond", serif;
            background: #f7f2e9 url('https://i.imgur.com/1zQ9ZqR.png');
            background-size: cover;
            padding: 30px;
            color: #2b1d14;
        }

        h1, h2 {
            font-family: "Cinzel", serif;
            text-align: center;
            letter-spacing: 2px;
            color: #3b2a20;
        }

        h1 {
            font-size: 42px;
            border-bottom: 3px solid #4a3427;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }

        h2 {
            margin-top: 30px;
            font-size: 26px;
        }

        .block {
            margin: 25px auto;
            padding: 20px;
            background: rgba(255, 248, 236, 0.96);
            border-radius: 10px;
            border: 2px solid #3d2c22;
            width: 80%;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
        }

        input[type="text"] {
            width: 260px;
            padding: 10px;
            border: 2px solid #3d2c22;
            border-radius: 6px;
            background: #fffaf2;
            font-size: 15px;
        }

        button {
            padding: 10px 18px;
            border: none;
            border-radius: 6px;
            background: #5e3d2c;
            color: #fcead6;
            font-weight: bold;
            cursor: pointer;
            margin-left: 10px;
            font-family: "Georgia", serif;
        }

        button:hover {
            background: #40281c;
        }

        ul {
            list-style: none;
            padding: 0;
            width: 80%;
            margin: auto;
        }

        li {
            background: rgba(255, 244, 228, 0.95);
            margin: 8px 0;
            padding: 10px 15px;
            border-radius: 8px;
            border: 2px solid #3c281f;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 18px;
            font-family: "Georgia", serif;
        }

        .occ {
            font-size: 15px;
            color: #6b4b38;
        }

        .btn {
            padding: 6px 12px;
            border-radius: 5px;
            background: #7b4a31;
            color: #fcead6;
            text-decoration: none;
            font-weight: bold;
            border: 1px solid #3b261b;
        }

        .btn:hover {
            background: #52301f;
        }

    </style>
</head>

<body>

<h1>⚜️ Moteur de Recherche Gutenberg ⚜️</h1>


<!-- Recherche mot-clé -->
<div class="block">
    <h2>Recherche par mot-clé</h2>
    <form method="post">
        {% csrf_token %}
        <input type="text" name="mot" placeholder="Mot indexé" value="{{ keyword_index }}">
        <button type="submit">Rechercher</button>
    </form>
</div>

<!-- Recherche regex -->
<div class="block">
    <h2>Recherche avec Regex</h2>
    <form method="post">
        {% csrf_token %}
        <input type="text" name="regex" placeholder="Expression régulière" value="{{ regex_query }}">
        <button type="submit">Rechercher</button>
    </form>
</div>

<!-- Résultats mot-clé -->
{% if results_index %}
    <h2>Résultats mot-clé :</h2>
    <ul>
    {% for book in results_index %}
        <li>
            <span>{{ book.title }} — <span class="occ">{{ book.count }} occurrences</span></span>
            <a href="{% url 'display_book' book.id %}" class="btn">Voir</a>
        </li>
    {% endfor %}
    </ul>
{% endif %}

<!-- Résultats regex -->
{% if results_regex %}
    <h2>Résultats Regex :</h2>
    <ul>
    {% for book in results_regex %}
        <li>
            <span>{{ book.title }} — <span class="occ">{{ book.count }} occurrences</span></span>
            <a href="{% url 'display_book' book.id %}" class="btn">Voir</a>
        </li>
    {% endfor %}
    </ul>
{% endif %}

</body>
</html>
